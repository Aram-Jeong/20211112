<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jQuery/seletor.html</title>
    <script src="jquery-3.6.0.min.js"></script>
    <script>
        class Student{
            constructor(studNo, studName, math, eng, hobby){
                this.studNo = studNo;
                this.studName = studName;
                this.math = math;
                this.eng = eng;
                this.hobby = hobby;
            }
            getAverage(){
                return Math.round((this.math + this.eng) / 2); // round로 소수점 반올림
            }
        }
        const students = [];
        let s1 = new Student('21-01', '빨강', 90, 80, '독서');
        let s2 = new Student('21-02', '주황', 70, 84, '바둑');
        let s3 = new Student('21-03', '노랑', 78, 90, '서예');
        let s4 = new Student('21-04', '초록', 60, 73, '운동');
        let s5 = new Student('21-05', '파랑', 70, 88, '요리');
        student.push(s1);
        student.push(s2);
        student.push(s3);
        student.push(s4);
        student.push(s5);

        

            let $table = $('<table>').attr('border','1');
            let $tbody = $('<tbody');
            $table.append($tbody);

            $(students).each(function(ind, val){
               
                let $tr = $('<tr>').append(
                    $('<td>').text(val.studNo),
                    $('<td>').text(val.studName),
                    $('<td>').text(val.math),
                    $('<td>').text(val.eng),
                    $('<td>').text(val.hobby),
                    $('<td>').text(val.getAverage()),
                    $('<td>').click(tdFnc).append($('<button>삭제</button>').click(delFnc))

                );
                $tr.click(trFnc);
                // $tr.mouseover(mouseOverFnc);
                // $tr.mouseout(mouseOutFnc);
                $tr.on({
                    
                    'mouseover' : mouseOverFnc,
                    'mouseout':mouseOutFnc
            });
                $tbody.append($tr);
            });
            $('#show').append($table);
            
            function mouseOutFnc(){
                $(this).css('background-color','');
            }
            
            function mouseOverFnc(){
                $(this).css('background-color','yellow'); // btn.style.backgroundColor
            }

            function trFnc(){
                console.log($(this));
              let sno =  $(this).children().eq(0).text();
              let sname =  $(this).children().eq(1).text();
              window.alert(`학번: ${sno}, 이름 : ${sname}`)
            }
         
             function tdFnc(){
                 console.log($(this));
             }
                // 삭제기능
             function delFnc(){
                event.stopPropagation();
                console.log($(this));
                $(this).parentsUntil('tbody').remove(); // tbody 이전 제일 최상위를 지우기
                let avg = $(this).parent().prev().text();
                let avg = $(this).parent().prev().prev().text();
                window.alert(`평균: ${avg}, 취미: ${hob}`);
            }
           
            // let $div= $('<div />').html('<h3>Hello</h3>').attr('id','id1');
            // let $p = $('<p />').text('<h3>Hello</h3>').attr('class','id1');

            // $('body').append($div, $p);

            // console.log($('div#id1>h3').text());
            // console.log($('p.id1').text());
    
    </script>
</head>
<body>
    <!-- <div>
        <h3>Bad</h3>
    </div>
     <p>Bad</p> -->
     <h3>학생명단</h3>
    <div id="show"></div>

    
</body>
</html>